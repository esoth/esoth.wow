<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      lang="en"
      metal:use-macro="context/main_template/macros/master"
      i18n:domain="plone">
<body>

<metal:content-core fill-slot="main">
    <metal:content-core define-macro="content-core"
                        tal:define="templateId string:@@pets-view;
                                    dummy here/autoUpdateData;
                                    petData here/petData">
      <h1 tal:content="string:${here/Title} Pets"/>

      <div metal:use-macro="here/gear_macro/macros/char_header" />
      
      <div>
      
      <table class="vertical listing">
        <tr>
          <th>Total Unique Pets</th>
          <td tal:content="petData/numUnique"/>
          <th>Number of Unique, Max Level pets</th>
          <td tal:content="petData/numUniqueMaxLevel"/>
          <th>Number of Unique Rares</th>
          <td tal:content="petData/numUniqueRare"/>
          <th>Number of Unique, Max Level Rares</th>
          <td tal:content="petData/numUniqueMaxLevelRare"/>
        </tr>
        <tr>
          <th>Total Pets (including duplicates)</th>
          <td tal:content="petData/numTotal"/>
          <th>Number of Max Level</th>
          <td tal:content="petData/numMaxLevel"/>
          <th>Number of Rares</th>
          <td tal:content="petData/numRare"/>
          <th>Number of Max Level Rares</th>
          <td tal:content="petData/numMaxLevelRare"/>
        </tr>
      </table>
        
        <br/>
        <p>Attention! The level 25 predicted pet data is not currently correct. It's a reasonable prediction in most cases though, only off by something under 20. Probably
          a bug with calculating base data
        </p>
      
      <h2>All Pets</h2>
      <table class="listing"
             tal:define="quality python:['Poor','Common','Uncommon','Rare','Epic','Legendary'];
                         breed python:['','','','B','P','S','H','H/P','P/S','H/S','P/B','S/B','H/B','B','P','S','H','H/P','P/S','H/S','P/B','S/B','H/B'];
                         breedClass python:{'B':'badBreed','S':'goodBreed','P':'goodBreed','H':'goodBreed'}">
        <thead>
          <tr>
            <th>Pet Name</th>
            <th>Level</th>
            <th>Quality</th>
            <th>Breed</th>
            <th>Health</th>
            <th>Speed</th>
            <th>Power</th>
            <th>Health (at 25)</th>
            <th>Speed (at 25)</th>
            <th>Power (at 25)</th>
          </tr>
        </thead>
        <tbody>
          <tal:pet repeat="pet petData/uniquePets">
            <tr>
              <td>
                <a tal:attributes="href string:http://www.wowhead.com/npc=${pet/creatureId}">
                  <img tal:attributes="src string:http://us.media.blizzard.com/wow/icons/18/${pet/icon}.jpg" />
                  <tal:hasname condition="python:pet['name'] != pet['creatureName']">
                    <span tal:omit-tag="" tal:content="string:${pet/name} (${pet/creatureName})"/>
                  </tal:hasname>
                  <tal:noname condition="python:pet['name'] == pet['creatureName']">
                    <span tal:omit-tag="" tal:content="pet/name"/>
                  </tal:noname>
                </a>
              </td>
              <tal:battle condition="python:pet['canBattle']=='True'">
                <td tal:content="pet/level"/>
                <td tal:attributes="class python:quality[ int( pet['qualityId'] ) ]"
                    tal:content="python:quality[ int( pet['qualityId'] ) ]"/>
                <td tal:content="python:breed[ int( pet['breedId'] ) ]"
                    tal:attributes="class python:breedClass.get(breed[ int( pet['breedId'] ) ], 'neutralBreed')"/>
                <td tal:content="pet/health"/>
                <td tal:content="pet/speed"/>
                <td tal:content="pet/power"/>
                <td tal:content="pet/maxH"/>
                <td tal:content="pet/maxS"/>
                <td tal:content="pet/maxP"/>
              </tal:battle>
              <tal:nonbattle condition="python:pet['canBattle']!='True'">
                <td />
                <td />
                <td />
                <td />
                <td />
                <td />
                <td />
                <td />
                <td />
              </tal:nonbattle>
            </tr>
          </tal:pet>
        </tbody>
      </table>

    </metal:content-core>
</metal:content-core>

</body>
</html>