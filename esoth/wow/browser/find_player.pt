<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      lang="en"
      metal:use-macro="context/main_template/macros/master"
      i18n:domain="plone">
<body>
    <metal:block fill-slot="top_slot"
                 tal:define="dummy python:request.set('disable_border',1);" />

<metal:main fill-slot="main"
            tal:define="mtool nocall:context/portal_membership;
                        checkPermission nocall:mtool/checkPermission">

        <dl class="portalMessage error" tal:condition="request/errors|string:">
          <dt>Error</dt>
          <dd tal:content="request/errors"/>
        </dl>
        
        <h1 id="find-player-header">Find a Player</h1>
        
        <p id="find-player-text">
          Anyone can use this form to find a character. If that character is not already on this site, it will be created - however, you will not
          have the ability to edit it! If you want to create a character that you can edit (so that you can use the gear path tool), you will
          need to first <a tal:attributes="href string:${portal_url}/@@register">register an account</a>. You will then be able to
          <a tal:attributes="href string:${context/absolute_url}/++add++GearPath">add your
          character</a>
        </p>

        <div id="find-player">
          <form tal:attributes="action string:${context/absolute_url}/find-player">
            <label for="server">Server:</label>
            <select name="server">
              <tal:server repeat="server view/servers">
                <option tal:attributes="selected python:request.get('server')==server['id'] and 'selected';
                                        value server/id"
                        tal:content="server/title"/>
              </tal:server>
            </select>&nbsp;&nbsp;
  
            <label for="character">Character:</label>
            <input type="text" name="character" tal:attributes="value request/character|string:"/>
  
            <input type="submit" class="context" value="Get it!" name="form.actions.go"/><br/><br/>
            or <a tal:attributes="href string:${context/absolute_url}/player_listing">View all characters</a>
          </form>
        </div>
        
        <div tal:condition="python:checkPermission('Modify portal content',context)">
          <a tal:attributes="href string:${context/absolute_url}/@@gear-resources">Gear</a> |
          <a tal:attributes="href string:${context/absolute_url}/@@pet-resources">Pet</a> |
          <a tal:attributes="href string:${context/absolute_url}/@@mount-resources">Mount</a>
        </div>

</metal:main>

</body>
</html>
